<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlackJack Pro Simulator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="container">
        <h1>BlackJack Pro Simulator</h1>

        <div class="game-board">
            <div id="dealer-section" class="hand-section">
                <h2>Dealer Hand <span id="dealer-score"></span></h2>
                <div class="cards" id="dealer-cards"></div>
            </div>

            <div id="message-area" class="message">Welcome to the Pro Simulator! Place your bet to begin.</div>

            <div id="players-container">
                <!-- Player hands will be injected here -->
            </div>
        </div>

        <div class="controls-area">
            <div id="betting-area">
                <div class="difficulty-selector">
                    <label>AI Intelligence:</label>
                    <select id="diff-select">
                        <option value="EASY">Casual (Basic)</option>
                        <option value="HARD" selected>Pro (Q-Learning + MC)</option>
                    </select>
                </div>
                <div class="chip-controls">
                    <div class="chip chip-10" onclick="addBet(10)">10</div>
                    <div class="chip chip-50" onclick="addBet(50)">50</div>
                    <div class="chip chip-100" onclick="addBet(100)">100</div>
                    <div class="chip chip-reset" onclick="resetBet()">Reset</div>
                </div>
                <div class="bet-info">
                    Current Bet: <strong>$<span id="current-bet-display">10</span></strong>
                </div>
                <button class="primary-btn" id="btn-start" onclick="placeBet()">Confirm Bet & Deal</button>
            </div>

            <div id="game-actions" style="display: none;" class="controls">
                <button id="btn-hit" onclick="hit()">Hit</button>
                <button id="btn-stand" onclick="stand()">Stand</button>
                <button id="btn-double" onclick="doubleDown()">Double</button>
                <button id="btn-split" onclick="split()" style="display: none;">Split</button>
                <button id="btn-insurance" onclick="insurance()" style="display: none;">Insurance</button>
                <button id="btn-withdraw" onclick="withdraw()">Withdraw</button>
            </div>

            <button id="btn-new" class="primary-btn" onclick="startGame()" style="display: none; margin: 20px auto;">New
                Session</button>
        </div>

        <div id="stats-area" class="stats-summary" style="display: none;">
            <div class="stat-box">
                <span class="stat-label">Rounds</span>
                <span class="stat-value" id="stat-rounds">0</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">Net Balance</span>
                <span class="stat-value" id="stat-human-wins">0</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">AI Accuracy</span>
                <span class="stat-value" id="stat-accuracy">0%</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">Card Count</span>
                <span class="stat-value" id="count-value">0</span>
            </div>
        </div>

        <div class="analytics-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
            <div class="chart-container">
                <h4>Performance Evolution</h4>
                <canvas id="balanceChart"></canvas>
            </div>
            <div id="decision-log" class="decision-log" style="display: none;">
                <h4>AI Strategy Insights</h4>
                <ul id="log-list"></ul>
            </div>
        </div>

        <div class="ai-insight" style="margin-top: 15px; color: #f1c40f; font-style: italic;">
            <strong>AI Suggestion:</strong> <span id="ai-advice">Waiting for turn...</span>
            <br>
            <small>Probabilities: Hit <span id="prob-hit">0%</span> | Stand <span id="prob-stand">0%</span></small>
        </div>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>